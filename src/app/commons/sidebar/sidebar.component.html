<mat-sidenav-container id="main-sidebar" class="example-container mat-sidenav-{{isExpanded}}" [hasBackdrop]="false">

	<mat-sidenav #sidenav mode="{{overActive ? 'over' : 'side'}}" opened="true" (mouseenter)="checkOver(true)"
		(mouseleave)="checkOver(false)" [disableClose]="true">

		<mat-nav-list>
			<mat-list-item class="navbar-top">
				<button mat-icon-button *ngIf="isExpanded">
					<mat-icon (click)="toggleSidebar()" *ngIf="isExpanded">menu</mat-icon>
				</button>
				<img *ngIf="!isExpanded" src="assets/icono.ico" alt="icono" style="width:35px">
				<img matLine *ngIf="isExpanded" src="assets/full-logo-dark.png" alt="logo" style="width:70px">
		</mat-list-item>

			<div class="sidebar-content">

				<div class="mat-list-items">
					<mat-list-item routerLink="dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" *ngIf="user['permisos']?.dashboard">
						<mat-icon mat-list-icon>dashboard</mat-icon>
						<p matLine *ngIf="isExpanded">Dashboard</p>
					</mat-list-item>

					<mat-list-item routerLink="servicios" routerLinkActive="active" *ngIf="user['permisos']?.servicios?.listar">
						<i mat-list-icon class="fas fa-chart-bar"></i>
						<p matLine *ngIf="isExpanded">Servicios</p>
					</mat-list-item>

					<mat-list-item routerLink="lista-solicitudes-servicios" routerLinkActive="active" *ngIf="user['permisos']?.all_solicitudes_servicios">
						<i mat-list-icon class="fas fa-chart-line"></i>
						<p matLine *ngIf="isExpanded">Solicitudes al Servicios</p>
					</mat-list-item>


					<mat-list-item routerLink="terceros" routerLinkActive="active" *ngIf="user['permisos']?.terceros?.listar">
						<i mat-list-icon class="fas fa-users"></i>
						<p matLine *ngIf="isExpanded">Terceros</p>
					</mat-list-item>


					<mat-list-item routerLink="solicitudes-tercero" routerLinkActive="active" *ngIf="user['permisos']?.all_solicitudes_terceros">
						<!-- <mat-icon >person</mat-icon> -->
						<i mat-list-icon class="fas fa-user-tie"></i>
						<p matLine *ngIf="isExpanded">Solicitudes Tercero</p>
					</mat-list-item>

					<mat-list-item routerLink="agenda" routerLinkActive="active" *ngIf="user['permisos']?.agenda">
						<!-- <mat-icon >person</mat-icon> -->
						<i mat-list-icon class="fas fa-calendar-day"></i>
						<p matLine *ngIf="isExpanded">Agenda</p>
					</mat-list-item>


					<mat-list-item routerLink="validar-labores" routerLinkActive="active" *ngIf="user['permisos']?.validar_labores">
						<!-- <mat-icon >person</mat-icon> -->
						<i mat-list-icon class="fas fa-check-circle"></i>
						<p matLine *ngIf="isExpanded">Validar Labores</p>
					</mat-list-item>


					<mat-list-item routerLink="planes" routerLinkActive="active" *ngIf="user['permisos']?.planes?.listar">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-dollar-sign"></i>
						<p matLine *ngIf="isExpanded">Planes</p>
					</mat-list-item>

					<mat-list-item routerLink="retiros" routerLinkActive="active" *ngIf="user['permisos']?.retiros">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-sign-out-alt"></i>
						<p matLine *ngIf="isExpanded">Retiros Programados</p>
					</mat-list-item>

					<mat-list-item routerLink="suspensiones" routerLinkActive="suspensiones" routerLinkActive="active" *ngIf="user['permisos']?.suspensiones">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-calendar-minus"></i>
						<p matLine *ngIf="isExpanded">Suspensiones</p>
					</mat-list-item>

					<mat-list-item routerLink="convenios-servicios" routerLinkActive="convenios-servicios" routerLinkActive="active" *ngIf="user['permisos']?.convenios_servicios">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-comments-dollar"></i>
						<p matLine *ngIf="isExpanded">Convenios Servicios</p>
					</mat-list-item>

					<mat-list-item routerLink="excepciones-servicios" routerLinkActive="excepciones-servicios" routerLinkActive="active" *ngIf="user['permisos']?.excepciones_servicios">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-exclamation-triangle"></i>
						<p matLine *ngIf="isExpanded">Excepciones Servicios</p>
					</mat-list-item>

					<mat-list-item routerLink="acuerdos-pago-terceros" routerLinkActive="acuerdos-pago-terceros" routerLinkActive="active" *ngIf="user['permisos']?.acuerdos_pago_terceros">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-hands-helping"></i>
						<p matLine *ngIf="isExpanded">Acuerdos P Terceros</p>
					</mat-list-item>

					<mat-list-item routerLink="facturacion-bloque" routerLinkActive="facturacion-bloque" routerLinkActive="active" *ngIf="user['permisos']?.facturacion_bloque">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-file-invoice-dollar"></i>
						<p matLine *ngIf="isExpanded">Facturación Bloque</p>
					</mat-list-item>

					<mat-list-item routerLink="estados-cuentas" routerLinkActive="estados-cuentas" routerLinkActive="active" *ngIf="user['permisos']?.estados_cuentas">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-wallet"></i>
						<p matLine *ngIf="isExpanded">Estados Cuentas</p>
					</mat-list-item>

					<mat-list-item routerLink="transacciones" routerLinkActive="transacciones" routerLinkActive="active" *ngIf="user['permisos']?.transacciones">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-cash-register"></i>
						<p matLine *ngIf="isExpanded">Transacciones</p>
					</mat-list-item>

					<mat-list-item routerLink="municipios" routerLinkActive="municipios" routerLinkActive="active" *ngIf="user['permisos']?.municipios">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-city"></i>
						<p matLine *ngIf="isExpanded">Municipios</p>
					</mat-list-item>

					<mat-list-item routerLink="informes" routerLinkActive="informes" routerLinkActive="active" *ngIf="user['permisos']?.informes">
						<!-- <mat-icon >attach_money</mat-icon> -->
						<i mat-list-icon class="fas fa-file-alt"></i>
						<p matLine *ngIf="isExpanded">informes</p>
					</mat-list-item>

					<mat-list-item (click)="configuracionesMenu = !configuracionesMenu"
						[ngClass]="{'bg-menu-active' : configuracionesMenu}" *ngIf="user['permisos']?.configuraciones">
						<i mat-list-icon class="fas fa-cog"></i>
						<p matLine *ngIf="isExpanded">Configuraciones</p>
						<mat-icon class="menu-button" [ngClass]="{'rotated' : configuracionesMenu}" *ngIf="isExpanded">
							expand_more</mat-icon>
					</mat-list-item>

					<div class="submenu" [hidden]="!configuracionesMenu || !isExpanded">
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.estados_sol_terceros"> Estados solicitudes de terceros</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.tipos_sol_terceros"> Tipos solicitudes de terceros</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.estados_servicios"> Estados servicios</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.tipos_servicios"> Tipos servicios</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.tipos_actividadades_sol_tercero">Tipos actividadades sololicitud tercero</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.tipos_sol_servicios">Tipos solicitudes servicios</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.grupos_sol_servicios">Grupos solicitudes servicios</a>
						<a mat-list-item *ngIf="user['permisos']?.configuraciones?.clasificacion_pqr">Clasificación PQR</a>
					</div>
				</div>

				<div class="user-menu">

					<div *ngIf="isExpanded">
						<input type="file" #facBloque (change)="uploadFacturacionBloque($event)" hidden>
						<input type="file" #estCuentas (change)="uploadEstadosCuentas($event)" hidden>
						<div class="shortcuts" fxLayout="row" fxLayoutAlign="space-around center">

							<button mat-icon-button matTooltip="Crear Servicio" routerLink="/servicio" *ngIf="user['permisos']?.servicios?.crear">
								<mat-icon>library_add</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Migración" (click)="migration()">
								<mat-icon>open_in_browser</mat-icon>
							</button>
							<button mat-icon-button matTooltip="Importar Estados de Cuentas." (click)="estCuentas.click()"
								[disabled]="loading" *ngIf="user['permisos']?.accesos_directos_sidebar?.importar_est_cuenta?.importar">
								<i class="fas fa-wallet fa-lg"></i>
							</button>
							<button mat-icon-button matTooltip="Importar Facturación en Bloque." (click)="facBloque.click()"
								[disabled]="loading" *ngIf="user['permisos']?.accesos_directos_sidebar?.importar_fac_bloque?.importar">
								<i class="fas fa-file-invoice-dollar fa-lg"></i>
							</button>
							<button mat-icon-button matTooltip="Servicios Activos/Inactivos" [matMenuTriggerFor]="menuInactivos" *ngIf="user['permisos']?.accesos_directos_sidebar?.servicios_inactivos?.listar">
								<mat-icon>money_off</mat-icon>
							</button>
							<mat-menu #menuInactivos="matMenu">
								<button mat-menu-item (click)="getInactivos('activos')"><mat-icon>attach_money</mat-icon>Servicios Activos</button>
								<button mat-menu-item (click)="getInactivos('inactivos')"><mat-icon>money_off</mat-icon> Servicios Inactivos</button>
							</mat-menu>

							<button mat-icon-button 
								matTooltip="Generar reporte de transacciones por día."
								(click)="downloadTransacciones()" 
								*ngIf="user['permisos']?.accesos_directos_sidebar?.transacciones?.generar_reporte">
								<i class="fas fa-cash-register"></i>
							</button>

							<button mat-icon-button 
								matTooltip="Actualizar estados de activación de servicios."
								(click)="updateEstadosActivacionServicios()" 
								*ngIf="user['permisos']?.accesos_directos_sidebar?.act_est_activacion?.actualizar">
								<mat-icon>sync_alt</mat-icon>
							</button>

						</div>
					</div>
		
					<mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
		
					<div fxLayout="row" fxLayoutAlign="space-around center">
						<div>
							<button mat-button class="user-button">
								<div fxLayout="row" fxLayoutAlign="center center">
									<img class="avatar mr-0 mr-sm-16" src="assets/avatars/bitwan_white.jpg">
									<span class="username mr-12" *ngIf="isExpanded">{{user['nombres']}}</span>
								</div>
							</button>
							<!-- <mat-menu #userMenu="matMenu" [overlapTrigger]="false">
								<button mat-menu-item class="" (click)="logout()">
									<mat-icon>exit_to_app</mat-icon>
									<span>Logout</span>
								</button>
							</mat-menu> -->
						</div>
						<div *ngIf="isExpanded">
							<button mat-icon-button color="warn" (click)="logout()" matTooltip="Cerrar Sesión">
								<mat-icon>exit_to_app</mat-icon>
							</button>
						</div>
					</div>
		
		
		
				</div>

			</div>

		</mat-nav-list>
	</mat-sidenav>

	<mat-sidenav-content>
		<div class="margin-{{overActive}}" style="height: 100%">
			<!-- <app-top-menu></app-top-menu> -->
			<router-outlet></router-outlet>
		</div>
	</mat-sidenav-content>

</mat-sidenav-container>